import{a as T,b as h,c as q,d as F,e as N,f as g,h as O,i as A,j as G,m as D}from"./chunk-DEV7FMDT.js";import{k as E,s as k,y as x}from"./chunk-5FJKB7TP.js";import{$ as v,Gb as a,Nb as w,Qa as s,V as _,_ as C,ca as y,eb as c,gb as b,kb as p,ob as r,pb as o,qb as d,xb as S}from"./chunk-PTJC2S3F.js";var I=(()=>{let e=class e{constructor(t){this._HttpClient=t,this.token={token:localStorage.getItem("userToken")}}sendrequest(t,l){return this._HttpClient.post(`${x}/api/v1/orders/checkout-session/${t}?url=http://localhost:4200/`,{shippingAddress:l},{headers:this.token})}};e.\u0275fac=function(l){return new(l||e)(C(E))},e.\u0275prov=_({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();function M(i,e){i&1&&(r(0,"p",6),a(1,"required"),o())}function R(i,e){i&1&&(r(0,"p",6),a(1,"required"),o())}function H(i,e){i&1&&(r(0,"p",6),a(1,"required"),o())}function V(i,e){i&1&&d(0,"i",12)}var W=(()=>{let e=class e{constructor(){this._OrderService=v(I),this._ActivatedRoute=v(k),this.loading=!1,this.orders=new N({details:new g(null,[h.required]),phone:new g(null,[h.required]),city:new g(null,[h.required])})}ngOnInit(){this._ActivatedRoute.paramMap.subscribe({next:t=>{this.carid=t.get("cid")},error:t=>{console.log(t)}})}pay(){this.loading=!0,this.orders.valid?this._OrderService.sendrequest(this.carid,this.orders.value).subscribe({next:t=>{t.status=="success"&&window.open(t.session.url,"_self"),this.loading=!1,console.log(t)},error:t=>{console.log(t),this.loading=!1}}):(this.orders.markAllAsTouched(),this.loading=!1)}};e.\u0275fac=function(l){return new(l||e)},e.\u0275cmp=y({type:e,selectors:[["app-order"]],standalone:!0,features:[w],decls:22,vars:5,consts:[[1,"mt-5","register-w","m-auto","pb-2","mb-2","shadow","p-3"],[1,"w-50","m-auto"],["src","./assets/images/freshcart-logo.svg","alt","",1,"w-100"],[3,"formGroup"],["for","details"],["formControlName","details","id","details",1,"form-control"],[1,"m-0","rounded-2","bg-danger-subtle","p-2"],["for","phone"],["formControlName","phone","type","tel","id","phone",1,"form-control"],["for","city"],["formControlName","city","type","text","id","city",1,"form-control"],[1,"btn-main","my-2",3,"click"],[1,"fas","fa-spin","fa-spinner"]],template:function(l,n){if(l&1&&(r(0,"section",0)(1,"div",1),d(2,"img",2),o(),r(3,"form",3)(4,"div")(5,"label",4),a(6,"Details :"),o(),d(7,"textarea",5),o(),c(8,M,2,0,"p",6),r(9,"div")(10,"label",7),a(11,"phone :"),o(),d(12,"input",8),o(),c(13,R,2,0,"p",6),r(14,"div")(15,"label",9),a(16,"city :"),o(),d(17,"input",10),o(),c(18,H,2,0,"p",6),r(19,"button",11),S("click",function(){return n.pay()}),a(20,"Go To pay "),c(21,V,1,0,"i",12),o()()()),l&2){let m,u,f;s(3),b("formGroup",n.orders),s(5),p(8,(m=n.orders.get("details"))!=null&&m.errors&&((m=n.orders.get("details"))!=null&&m.touched)?8:-1),s(5),p(13,(u=n.orders.get("phone"))!=null&&u.errors&&((u=n.orders.get("phone"))!=null&&u.touched)?13:-1),s(5),p(18,(f=n.orders.get("city"))!=null&&f.errors&&((f=n.orders.get("city"))!=null&&f.touched)?18:-1),s(3),p(21,n.loading?21:-1)}},dependencies:[D,O,T,q,F,A,G]});let i=e;return i})();export{W as OrderComponent};
