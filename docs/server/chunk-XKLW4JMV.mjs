import './polyfills.server.mjs';
import{a as D}from"./chunk-C6A65BQU.mjs";import{a as F,b as c,c as T,d as V,e as x,f as g,h as N,i as G,j as A,m as q}from"./chunk-PVHMPLQL.mjs";import"./chunk-SVCHEVXD.mjs";import{G as E}from"./chunk-O7V7OWRG.mjs";import{$ as y,Fb as l,Gb as _,Mb as P,Pa as a,X as b,db as p,fb as f,ja as h,jb as m,ka as w,nb as n,ob as o,pb as u,sb as C,wb as v,xb as d}from"./chunk-ONHE2IK4.mjs";import"./chunk-VVCT4QZE.mjs";function I(t,r){t&1&&(n(0,"span"),u(1,"i",8),o())}function M(t,r){if(t&1&&(n(0,"div",7)(1,"p",9),l(2),o()()),t&2){let i=d(2);a(2),_(i.msgerr)}}function R(t,r){if(t&1){let i=C();n(0,"form",3),v("ngSubmit",function(){h(i);let s=d();return w(s.emailVerfiy())}),n(1,"label",4),l(2,"email"),o(),u(3,"input",5),n(4,"button",6),l(5,"verfiy email "),p(6,I,2,0,"span"),o(),p(7,M,3,1,"div",7),o()}if(t&2){let i,e=d();f("formGroup",e.postemail),a(4),f("disabled",e.disable),a(2),m(6,e.isloading?6:-1),a(),m(7,(i=e.postemail.get("email"))!=null&&i.touched&&((i=e.postemail.get("email"))==null?null:i.valid)!==!0?7:-1)}}function k(t,r){t&1&&(n(0,"span"),u(1,"i",8),o())}function $(t,r){if(t&1&&(n(0,"div",7)(1,"p",9),l(2),o()()),t&2){let i=d(2);a(2),_(i.msgerr)}}function j(t,r){if(t&1&&(n(0,"div",13)(1,"p",9),l(2),o()()),t&2){let i=d(2);a(2),_(i.sucmsg)}}function z(t,r){if(t&1){let i=C();n(0,"form",3),v("ngSubmit",function(){h(i);let s=d();return w(s.codeverfiy())}),n(1,"label",10),l(2,"code"),o(),u(3,"input",11),n(4,"button",12),l(5,"verfiy code "),p(6,k,2,0,"span"),o(),p(7,$,3,1,"div",7)(8,j,3,1,"div",13),o()}if(t&2){let i,e=d();f("formGroup",e.verifyCode),a(6),m(6,e.isloading?6:-1),a(),m(7,(i=e.verifyCode.get("resetCode"))!=null&&i.touched&&((i=e.verifyCode.get("resetCode"))==null?null:i.valid)!==!0?7:-1),a(),m(8,e.success?8:-1)}}function B(t,r){t&1&&(n(0,"span"),u(1,"i",8),o())}function H(t,r){if(t&1&&(n(0,"div",7)(1,"p",9),l(2),o()()),t&2){let i=d(2);a(2),_(i.msgerr)}}function J(t,r){if(t&1){let i=C();n(0,"form",3),v("ngSubmit",function(){h(i);let s=d();return w(s.resetpassword())}),n(1,"label",4),l(2,"email"),o(),u(3,"input",14),n(4,"label",15),l(5,"New password"),o(),u(6,"input",16),n(7,"button",12),l(8,"verfiy password "),p(9,B,2,0,"span"),o(),p(10,H,3,1,"div",7),o()}if(t&2){let i,e=d();f("formGroup",e.resetPassword),a(9),m(9,e.isloading?9:-1),a(),m(10,(i=e.resetPassword.get("newPassword"))!=null&&i.touched&&((i=e.resetPassword.get("newPassword"))==null?null:i.valid)!==!0?10:-1)}}var Y=(()=>{let r=class r{constructor(){this.steps=1,this.isloading=!1,this.msgerr="",this.error=!1,this.sucmsg="",this.disable=!1,this.success=!1,this._Router=b(E),this._AuthService=b(D),this.postemail=new x({email:new g(null,[c.required,c.email])}),this.verifyCode=new x({resetCode:new g(null,[c.required,c.pattern(/^[0-9]{6}$/)])}),this.resetPassword=new x({email:new g(null,[c.required,c.email]),newPassword:new g(null,[c.required,c.pattern(/^\w{6,20}$/)])})}emailVerfiy(){if(this.postemail.valid){this.disable=!0,this.isloading=!0;let e=this.postemail.get("email")?.value;this.resetPassword.get("email")?.patchValue(e),this._AuthService.sendEmail(this.postemail.value).subscribe({next:s=>{s.statusMsg=="success"&&(this.steps=2,this.disable=!1,this.isloading=!1,this.sucmsg=s.message,this.success=!0,setTimeout(()=>{this.success=!1},4e3))},error:s=>{this.isloading=!1,this.msgerr=s.error.message,this.error=!0,setTimeout(()=>{this.error=!1},15e3),console.log("errors",s)}})}else this.error=!0,this.msgerr="none valid email"}codeverfiy(){this.error=!1,this.verifyCode.valid?(this.isloading=!0,this._AuthService.sendcode(this.verifyCode.value).subscribe({next:e=>{this.isloading=!1,e.status=="Success"&&(this.steps=3)},error:e=>{this.isloading=!1,this.error=!0,console.log("err",e),this.msgerr=e.error.message}})):(this.error=!0,this.msgerr="none valid code ")}resetpassword(){this.resetPassword.get("newPassword")?.valid&&(this.error=!1),this.resetPassword.valid?(this.isloading=!0,this._AuthService.resetPassword(this.resetPassword.value).subscribe({next:e=>{console.log(e),this._Router.navigate(["/login"]),this.isloading=!1},error:e=>{console.log(e),this.isloading=!1}})):(this.error=!0,this.msgerr="none valid password min 3 max 20")}};r.\u0275fac=function(s){return new(s||r)},r.\u0275cmp=y({type:r,selectors:[["app-forgot-password"]],standalone:!0,features:[P],decls:6,vars:1,consts:[[1,"register-w","m-auto"],[1,"text-center"],[1,"shadow","p-2",3,"formGroup"],[1,"shadow","p-2",3,"ngSubmit","formGroup"],["for","email"],["formControlName","email","placeholder","enter valid email","type","email","id","email",1,"form-control"],[1,"ms-auto","d-block","btn-main","my-2",3,"disabled"],[1,"bg-danger-subtle","p-2","rounded-2"],[1,"fas","fa-spin","fa-spinner"],[1,"m-0"],["for","code"],["placeholder","enter verfiy code","formControlName","resetCode","type","text","id","code",1,"form-control"],[1,"ms-auto","d-block","btn-main","my-2"],[1,"bg-success","text-white","rounded-2","p-2"],["formControlName","email","readonly","","placeholder","enter valid email","type","email","id","email",1,"form-control"],["for","password"],["placeholder","enter new password","formControlName","newPassword","type","password","id","password",1,"form-control"]],template:function(s,S){s&1&&(n(0,"section",0)(1,"h2",1),l(2,"forgot password"),o(),p(3,R,8,4,"form",2)(4,z,9,4)(5,J,11,3),o()),s&2&&(a(3),m(3,S.steps==1?3:S.steps==2?4:S.steps==3?5:-1))},dependencies:[q,N,F,T,V,G,A]});let t=r;return t})();export{Y as ForgotPasswordComponent};
